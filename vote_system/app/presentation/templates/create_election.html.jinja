{% extends "main.html.jinja" %}

{% block main %}
<p>Create a new election:</p>
<form id="createElectionForm" action="/election">
  <div class="form-group">
    <label for="exampleInputElectionName">Election name</label>
    <input type="text" class="form-control" name="inputElectionName" aria-describedby="ElectionNameHelp" placeholder="Enter name of election">
  </div>
  <div class="form-group">
    <label for="inputStartDate">Start date</label>
    <input type="date" class="form-control" name="inputStartDate">
    <label for="inputEndDate">End date</label>
    <input type="date" class="form-control" name="inputEndDate">
  </div>
  
  <button type="submit" class="btn btn-primary">Create election</button>
</form>

{% endblock %}

{% block javascript %}
  <script src="https://unpkg.com/ag-grid-community/dist/ag-grid-community.min.js"></script>
  <script type="text/javascript">
    $("#createElectionForm").submit(function(e) {

      e.preventDefault(); // avoid to execute the actual submit of the form.

      var form = $(this);
      var url = form.attr('action');

      $.ajax({
        type: "POST",
        url: url,
        headers: getJwtHeader(),
        data: form.serialize(), // serializes the form's elements.
        success: function(data)
        {
            alert("Candidate added to election ID: " + data.electionId);
            document.getElementById("createElectionForm").reset();
        }
      });
    });
  </script>
{% endblock %}